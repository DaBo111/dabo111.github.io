let pageLoaded=!1,animationComplete=!1,isStuckLoading=!1,stuckAnimationInterval=null;function initializePreloader(){startGraphAnimation(),setTimeout(function(){pageLoaded||(isStuckLoading=!0,startStuckLoadingAnimation())},300)}function checkReadyToHide(){pageLoaded&&animationComplete&&(stuckAnimationInterval&&(clearInterval(stuckAnimationInterval),stuckAnimationInterval=null),fadeOutPreloader(document.getElementById("preloader"),69))}function startStuckLoadingAnimation(){const e=document.querySelectorAll(".node");let t=!0;stuckAnimationInterval=setInterval(()=>{pageLoaded?clearInterval(stuckAnimationInterval):(e.forEach(e=>{t?(e.classList.remove("active"),e.style.animation="nodeDeactivation 0.3s ease"):(e.classList.add("active"),e.style.animation="nodeActivation 0.3s ease")}),t=!t)},600)}function startGraphAnimation(){const t=[[document.getElementById("node-1")],[document.getElementById("node-2"),document.getElementById("node-7")],[document.getElementById("node-3"),document.getElementById("node-5"),document.getElementById("node-8")],[document.getElementById("node-4"),document.getElementById("node-6"),document.getElementById("node-9")]];if(!t.flat().every(e=>null!==e))return console.warn("Some graph nodes not found, retrying..."),void setTimeout(startGraphAnimation,100);let o=0;!function e(){o<t.length&&(t[o].forEach((e,t)=>{e&&setTimeout(()=>{e.classList.add("active"),e.style.animation="nodeActivation 0.6s ease"},50*t)}),++o<t.length?setTimeout(e,200):(animationComplete=!0,pageLoaded?setTimeout(()=>{fadeOutPreloader(document.getElementById("preloader"),69)},100):checkReadyToHide()))}()}function fadeOutPreloader(e,t){opacity=1,interval=setInterval(function(){opacity<=0?(e.style.zIndex=0,e.style.opacity=0,e.style.filter="alpha(opacity = 0)",document.documentElement.style.overflowY="auto",document.getElementById("preloader").remove(),clearInterval(interval)):(opacity-=.1,e.style.opacity=opacity,e.style.filter="alpha(opacity = "+100*opacity+")")},t)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initializePreloader):initializePreloader(),setTimeout(function(){animationComplete||isStuckLoading||initializePreloader()},50),window.addEventListener("load",function(){pageLoaded=!0,checkReadyToHide()}),setTimeout(function(){pageLoaded||startGraphAnimation()},100),$(document).ready(function(){$(window).on("beforeunload",function(){window.scrollTo(0,0)}),particlesJS.load("landing","assets/particles.json",function(){});var t=document.getElementById("txt-rotate"),o=t.getAttribute("data-rotate"),n=t.getAttribute("data-period"),e=(setTimeout(function(){var e=JSON.parse(o);1===e.length?t.innerHTML='<span class="wrap">'+e[0]+"</span>":new TxtRotate(t,e,n)},1500),document.createElement("style"));e.type="text/css",e.innerHTML="#txt-rotate > .wrap { border-right: 0.08em solid #666 }",document.body.appendChild(e),AOS.init({disable:"mobile",offset:200,duration:600,easing:"ease-in-sine",delay:100,once:!0}),initFloatingNav(),initResearchFiltering(),initBlogsFiltering(),initBugReportModal()});var TxtRotate=function(e,t,o){this.toRotate=t,this.el=e,this.loopNum=0,this.period=parseInt(o,10)||2e3,this.txt="",this.tick(),this.isDeleting=!1};function randomizeOrder(){var t=document.getElementById("skills"),e=t.querySelectorAll("div[skill-type]"),o=Array.from(e);o.forEach(e=>e.remove());for(let e=o.length-1;0<e;e--){var n=Math.floor(Math.random()*(e+1));[o[e],o[n]]=[o[n],o[e]]}o.forEach(e=>t.appendChild(e))}function initFloatingNav(){const e=document.querySelectorAll(".nav-link, .logo-link");e.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var e=this.getAttribute("href").substring(1),e=document.getElementById(e);e&&(e=e.offsetTop-100,window.scrollTo({top:e,behavior:"smooth"}))})}),initNavArrows(),window.addEventListener("scroll",updateActiveNavLink)}function initNavArrows(){const o=document.querySelector(".nav-menu"),n=document.getElementById("nav-arrow-left"),i=document.getElementById("nav-arrow-right");function e(){var e=o.scrollLeft,t=o.scrollWidth-o.clientWidth;5<e?n.classList.add("show"):n.classList.remove("show"),e<t-5?i.classList.add("show"):i.classList.remove("show")}function t(e){var t=o.scrollLeft,e="left"===e?t-120:t+120;o.scrollTo({left:e,behavior:"smooth"})}o&&n&&i&&(n.addEventListener("click",()=>t("left")),i.addEventListener("click",()=>t("right")),o.addEventListener("scroll",e),window.addEventListener("resize",()=>{setTimeout(e,100)}),setTimeout(e,100))}function updateActiveNavLink(){const n=window.scrollY+150;var e=window.innerHeight,t=document.documentElement.scrollHeight;let i="landing";window.scrollY+e>=t-50?i="contact":["landing","about","timeline","research","skills","opensource","blogs","contact"].forEach(e=>{var t,o=document.getElementById(e);o&&(o=(t=o.offsetTop)+o.offsetHeight,n>=t&&n<o&&(i=e))}),document.querySelectorAll(".nav-link").forEach(e=>{e.classList.remove("active"),e.getAttribute("href")==="#"+i&&e.classList.add("active")})}function initResearchFiltering(){const t=document.querySelectorAll(".research-filters .filter-btn"),n=document.querySelectorAll(".research-item");if(0!==t.length&&0!==n.length){t.forEach(e=>{e.addEventListener("click",function(){const o=this.getAttribute("data-year");t.forEach(e=>e.classList.remove("active")),this.classList.add("active"),n.forEach(e=>{var t=e.getAttribute("data-year");"all"===o||t===o?(e.style.display="block",e.classList.remove("hidden"),e.getAttribute("data-aos")&&e.classList.add("aos-animate")):(e.style.display="none",e.classList.add("hidden"))})})});const o=Array.from(t).filter(e=>"all"!==e.getAttribute("data-year"));var e=Math.max(...o.map(e=>parseInt(e.getAttribute("data-year"))||0));const i=document.querySelector('.research-filters [data-year="'+e+'"]');i&&i.click()}}function toggleDescription(e){const t=e.closest(".project-desc-wrapper"),o=t.querySelector(".desc-preview"),n=t.querySelector(".desc-full");"none"===n.style.display?(o.style.display="none",n.style.display="inline",e.textContent="See less"):(o.style.display="inline",n.style.display="none",e.textContent="See more")}function initBlogsFiltering(){const t=document.querySelectorAll(".blogs-filters.category-filters .filter-btn"),n=document.querySelectorAll(".blog-item");if(0!==t.length&&0!==n.length){t.forEach(e=>{e.addEventListener("click",function(){const o=this.getAttribute("data-category");t.forEach(e=>e.classList.remove("active")),this.classList.add("active"),n.forEach(e=>{var t=e.getAttribute("data-category");"all"===o||t===o?(e.style.display="block",e.classList.remove("hidden"),e.getAttribute("data-aos")&&e.classList.add("aos-animate")):(e.style.display="none",e.classList.add("hidden"))})})});const e=document.querySelector('.blogs-filters.category-filters [data-category="all"]');e&&e.click()}}function initBugReportModal(){const e=document.getElementById("bug-report-btn"),r=document.getElementById("bug-report-modal"),t=document.getElementById("bug-modal-close"),o=document.getElementById("bug-report-form");if(e&&r&&t){let i="",a=!1;function l(){const e=document.querySelector(".bug-form-container");if(e){const t=document.getElementById("loading-overlay"),o=(t&&t.remove(),document.createElement("div"));o.id="loading-overlay",o.style.cssText=`
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255, 255, 255, 0.95);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        border-radius: 20px;
      `,o.innerHTML=`
        <div style="font-size: 48px; margin-bottom: 20px;">🫡</div>
        <h3 style="margin-bottom: 16px; color: #333;">Submitting Bug Report...</h3>
        <p style="color: #666;">Please wait while I try to make google form works...</p>
      `,e.style.position="relative",e.appendChild(o)}}function n(){r.style.display="none",document.body.style.overflow=i,a=!1;const e=document.getElementById("loading-overlay");e&&e.remove();{const o=document.querySelector(".bug-form-container");if(o){o.innerHTML=`
        <form id="bug-report-form" 
              action="https://docs.google.com/forms/d/e/1FAIpQLSfJ4cnpqkvAz24haw1alxDpPjuRSV-lHZz8BEMdh4HZ8e-y6A/formResponse" 
              method="POST" 
              target="hidden_iframe">
          
          <div class="form-group">
            <label for="bug-title">Bug Title *</label>
            <input type="text" 
                   id="bug-title" 
                   name="entry.1026331850" 
                   placeholder="Brief description of the bug" 
                   required>
          </div>
          
          <div class="form-group">
            <label for="bug-description">Bug Description *</label>
            <textarea id="bug-description" 
                      name="entry.318105923" 
                      placeholder="Detailed description of what happened, what you expected, and steps to reproduce" 
                      rows="4" 
                      required></textarea>
          </div>
          
          <div class="form-group">
            <label for="bug-details">Other Details</label>
            <textarea id="bug-details" 
                      name="entry.1650897734" 
                      placeholder="Browser, device, or any other relevant information (optional)" 
                      rows="3"></textarea>
          </div>
          
          <div class="form-actions">
            <button type="submit" class="submit-btn">Submit Bug Report</button>
          </div>
        </form>
      `;const n=document.getElementById("bug-report-form");n&&n.addEventListener("submit",function(e){a=!0,setTimeout(function(){l()},200),setTimeout(function(){a&&(a=!1,handleFormSubmit())},8e3)})}}const t=document.querySelector('iframe[name="hidden_iframe"]');t&&t.remove()}e.addEventListener("click",function(){i=document.body.style.overflow||"",r.style.display="block",document.body.style.overflow="hidden",setTimeout(function(){{const e=document.querySelector('iframe[name="hidden_iframe"]'),t=(e&&e.remove(),document.createElement("iframe"));return t.name="hidden_iframe",t.style.display="none",t.onload=function(){a&&(a=!1,setTimeout(handleFormSubmit,300))},void document.body.appendChild(t)}},10)}),o&&o.addEventListener("submit",function(e){a=!0,setTimeout(function(){l()},200),setTimeout(function(){a&&(a=!1,handleFormSubmit())},8e3)}),window.closeBugModal=n,t.addEventListener("click",n),r.addEventListener("click",function(e){e.target===r&&n()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&"block"===r.style.display&&n()})}}function handleFormSubmit(){const e=document.getElementById("loading-overlay"),t=(e&&e.remove(),document.querySelector(".bug-form-container"));t&&(t.innerHTML=`
      <div style="text-align: center; padding: 40px;">
        <div style="font-size: 48px; margin-bottom: 20px;">👀</div>
        <h3 style="margin-bottom: 16px; color: #333;">Bug Report Submitted!</h3>
        <p style="margin-bottom: 20px; color: #666;">Thank you for your feedback! I promise to make an effort to fix it 🙂‍↕️.</p>
        <p style="color: #888; font-size: 14px;">This modal will close automatically in 3 seconds.</p>
      </div>
    `,setTimeout(function(){window.closeBugModal&&window.closeBugModal()},3e3))}function initProjectFilters(){const t=document.querySelectorAll(".project-filters .project-filter-btn"),e=document.querySelectorAll(".project[data-category]");if(0!==t.length&&0!==e.length){t.forEach(e=>{e.addEventListener("click",function(){var e=this.getAttribute("data-category");t.forEach(e=>e.classList.remove("active")),this.classList.add("active"),filterProjects(e)})});const o=new Set,n=(e.forEach(e=>{const t=e.getAttribute("data-category");t&&"others"!==t&&(e=t.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),o.add(e))}),document.querySelector(".project-filters")),i=document.querySelector('.project-filters .project-filter-btn[data-category="others"]');o.forEach(e=>{if("others"!==e.toLowerCase()){var t=e.toLowerCase().replace(/\s+/g,"-");if(!document.querySelector(`.project-filters [data-category="${t}"]`)){const o=document.createElement("button");o.className="project-filter-btn",o.setAttribute("data-category",t),o.textContent=e,o.addEventListener("click",function(){var e=this.getAttribute("data-category");const t=document.querySelectorAll(".project-filters .project-filter-btn");t.forEach(e=>e.classList.remove("active")),this.classList.add("active"),filterProjects(e)}),i?n.insertBefore(o,i):n.appendChild(o)}}})}}function filterProjects(o){const e=document.querySelectorAll(".project[data-category]");e.forEach(e=>{var t=e.getAttribute("data-category");"all"===o||t===o?(e.style.display="flex",e.style.opacity="0",setTimeout(()=>{e.style.opacity="1"},50)):e.style.display="none"})}TxtRotate.prototype.tick=function(){var e=this.loopNum%this.toRotate.length,e=this.toRotate[e],t=(this.isDeleting?this.txt=e.substring(0,this.txt.length-1):this.txt=e.substring(0,this.txt.length+1),this.el.innerHTML='<span class="wrap">'+this.txt+"</span>",this),o=200-100*Math.random();this.isDeleting&&(o/=5),this.isDeleting||this.txt!==e?this.isDeleting&&""===this.txt&&(this.isDeleting=!1,this.loopNum++,o=500):(o=this.period,this.isDeleting=!0),setTimeout(function(){t.tick()},o)},$(document).ready(function(){setTimeout(initProjectFilters,100)});